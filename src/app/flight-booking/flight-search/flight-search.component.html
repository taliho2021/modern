<div class="min-h-screen bg-base-100" style="margin: -2rem; padding: 2rem">
  <div class="container mx-auto px-4 py-8">
    <div class="card bg-base-200 shadow-xl mb-6">
      <div class="card-body">
        <h2 class="card-title text-3xl text-primary mb-4">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-8 w-8"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
            />
          </svg>
          Flight Search
        </h2>

        <form class="space-y-4">
          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold">From:</span>
            </label>
            <input
              [field]="filterForm.from"
              type="text"
              placeholder="Enter departure city"
              class="input input-bordered w-full"
            />
          </div>

          <div class="form-control">
            <label class="label">
              <span class="label-text font-semibold">To:</span>
            </label>
            <input
              [field]="filterForm.to"
              type="text"
              placeholder="Enter destination city"
              class="input input-bordered w-full"
            />
          </div>

          <div class="form-control mt-6">
            <button
              type="button"
              (click)="search()"
              class="btn btn-primary btn-lg"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-5 w-5 mr-2"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
                />
              </svg>
              Search Flights
            </button>
          </div>
        </form>
      </div>
    </div>

    @if(error()) {
    <div class="alert alert-error shadow-lg mb-6">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        class="stroke-current shrink-0 h-6 w-6"
        fill="none"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"
        />
      </svg>
      <div>
        <h3 class="font-bold">Error loading flights</h3>
        <div class="text-xs">{{ error() | json }}</div>
      </div>
    </div>
    } @else {
    <div
      class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-6"
    >
      @for (f of flights(); track f.id) {
      <app-flight-card
        [item]="f"
        [selected]="basket()[f.id]"
        (selectedChange)="updateBasket(f.id, $event)"
      >
        <p class="middle"><i>Delays are possible!</i></p>
        <p class="bottom"><small>Statement without guarantee!</small></p>
      </app-flight-card>
      }
    </div>

    <div class="card bg-base-200 shadow-xl">
      <div class="card-body">
        <h3 class="card-title text-secondary">Selected Flights</h3>
        <div class="mockup-code">
          <pre data-prefix="$"><code>{{ basket() | json }}</code></pre>
        </div>
      </div>
    </div>
    }
  </div>
</div>
